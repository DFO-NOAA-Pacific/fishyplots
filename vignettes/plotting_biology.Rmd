---
title: "Plotting biology"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Plotting biology}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

For these plots we will need biological data stored in three data frames in the `fishyplots` package which we can combine with `bind_rows` from `dplyr`.

```{r setup, message = FALSE}
library(fishyplots)
library(dplyr)
```

```{r}
data("nwfsc_bio")
data("afsc_bio")
data("pbs_bio")
all_data <- bind_rows(afsc_bio, nwfsc_bio, pbs_bio)
```

These functions take in any number of subregions and 1 species (although note that not all species occur in all regions).
```{r}
unique(all_data$survey)
head(unique(all_data$common_name))
```

Once you have chosen your desired region(s) and species, you can call the functions. Since some species have limited age data, some of the facets in the age frequency plot may be blank.
```{r plot1, warning = FALSE, fig.height = 5, fig.width = 7}
age_frequency(all_data, c("PBS", "NWFSC", "AK BSAI", "AK GULF"), "arrowtooth flounder")

```

```{r plot2, fig.height = 5, fig.width = 7}
length_frequency(all_data, c("PBS", "NWFSC", "AK BSAI", "AK GULF"), "arrowtooth flounder")
```


```{r plot3, fig.height = 6, fig.width = 7}
plot_age_depth(all_data, c("AK BSAI", "AK GULF", "PBS", "NWFSC"), "arrowtooth flounder")
```

You can also view age-depth for just one region and differentiate by sex (and if you really want to see sex differentiation across all regions, you can do that too).

```{r plot4, fig.height = 5, fig.width = 5}
plot_age_depth(all_data, "NWFSC", "arrowtooth flounder", by_sex = TRUE)
```

You can make the same types of graphs for the length-depth relationship as well.

```{r plot5, warning = FALSE, fig.height = 5, fig.width = 5}
plot_length_depth(all_data, "NWFSC", "sablefish")
```

To make growth plots, we will need prediction data formulated from the von Bertalanffy function that is stored in the `fishyplots` package.

```{r}
data(vb_predictions)
```

The function takes in both the biological data and prediction data, the desired region(s), and 1 species. 

```{r plot6, fig.height = 4, fig.width = 7}
plot_growth(all_data, vb_predictions, c("AK BSAI", "AK GULF", "NWFSC", "PBS"), "arrowtooth flounder")
```

