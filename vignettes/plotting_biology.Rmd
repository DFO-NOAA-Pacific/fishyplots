---
title: "Plotting biology"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Plotting biology}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

For these plots we will need biological data stored in three data frames in the `fishyplots` package which we can combine with `bind_rows` from `dplyr`.

```{r setup, message = FALSE}
library(fishyplots)
library(dplyr)
```

```{r}
data("nwfsc_bio")
data("afsc_bio")
data("pbs_bio")
all_data <- bind_rows(afsc_bio, nwfsc_bio, pbs_bio)
```

These functions take in any number of subregions and 1 species (although note that not all species occur in all regions).
```{r}
unique(all_data$survey)
head(unique(all_data$common_name))
```

Once you have chosen your desired region(s) and species, you can call the functions. Since some species have limited age data, some of the facets in the age frequency plot may be blank.
```{r plot7, warning = FALSE, fig.height = 5, fig.width = 6}
age_frequency(all_data, c("PBS", "NWFSC", "AK BSAI", "AK GULF"), "arrowtooth flounder")

```

```{r plot8, fig.height = 5, fig.width = 6}
length_frequency(all_data, c("PBS", "NWFSC", "AK BSAI", "AK GULF"), "arrowtooth flounder")
```


```{r plot1, fig.height = 6, fig.width = 7}
depth_plot(all_data, c("AK BSAI", "AK GULF", "PBS", "NWFSC"), "arrowtooth flounder")
```

You can also view age-depth for just one region and differentiate by sex.

```{r plot2, fig.height = 5, fig.width = 5}
depth_plot(all_data, "NWFSC", "arrowtooth flounder", sex = TRUE)
```

And if you really want to see sex differentiation across all regions, you can do that too! 
```{r plot3, fig.height = 7, fig.width = 7}
depth_plot(all_data, c("AK BSAI", "AK GULF", "PBS", "NWFSC"), "arrowtooth flounder", sex= TRUE)
```

To make growth plots, we will need prediction data formulated from the von Bertalanffy function that is stored in `fishyplots`.

```{r}
data(vb_predictions)
```

The function takes in both datasets, the desired region(s), and a species. The argument `facet_all` is optional and is automatically true if there are multiple subregions selected.

```{r plot5, fig.height = 4, fig.width = 6}
plot_growth(all_data, vb_predictions, c("AK BSAI", "AK GULF", "NWFSC", "PBS"), "arrowtooth flounder")
```

